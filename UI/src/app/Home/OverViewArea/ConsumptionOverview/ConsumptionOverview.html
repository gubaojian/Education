<app-nav></app-nav>

<p-tabView>
    <p-tabPanel header="概要" style="width:1140px;">
        <div class="container" style="width:1140px;">
            <div class="row">
                <div class="col">
                    <div style="border: 2px solid lightgray;padding: 5px;margin: 5px">
                        <div echarts [options]="monthlyTotalOpt" style="width:480px;height:400px;"></div>
                    </div>
                </div>
                <div class="col">
                    <div style="border: 2px solid lightgray;padding: 5px;margin: 5px">
                        <div echarts [options]="weekdayTotalOpt" style="width:480px;height:400px;"></div>
                    </div>
                </div>
            </div>
            <button type="button" class="btn btn-info" style="cursor: default">
                住校生 <span class="badge badge-light">{{liveAtSchool}}</span>
            </button>
            &nbsp;&nbsp;&nbsp;
            <button type="button" class="btn btn-primary" style="cursor: default">
                非住校生 <span class="badge badge-light">{{notLiveAtSchool}}</span>
            </button>
            <br />
            <br />
            <div class="row">
                <div class="col">
                    <div style="border: 2px solid lightgray;padding: 5px;margin: 5px">
                        <div echarts [options]="monthlyOpt" style="width:480px;height:400px;">
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div style="border: 2px solid lightgray;padding: 5px;margin: 5px">
                        <div echarts [options]="weekdayOpt" style="width:480px;height:400px;"> </div>
                    </div>
                </div>
            </div>
        </div>
    </p-tabPanel>
    <p-tabPanel header="消费预警" style="width:1140px;">
        月消费上限： <p-dropdown [options]="MonthUpLimitList" [(ngModel)]="MonthUpLimit" [style]="{'width':'150px'}"
            placeholder="选择一个月消费金额：" (onChange)="QueryByMonthUpLimit()"></p-dropdown>
        <br />
        <br />
        <p-table [value]="this.Students" selectionMode="single" [(selection)]="this.selectStudent" [scrollable]="true"
            scrollHeight="800px" (onRowSelect)="onRowSelect($event)">
            <ng-template pTemplate="header">
                <tr>
                    <th style="width: 50px">学号</th>
                    <th style="width: 100px">姓名</th>
                    <th style="width: 100px">班级</th>
                    <th style="width: 100px">性别</th>
                    <th style="width: 100px">月度</th>
                    <th style="width: 100px">金额</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-itemData>
                <tr [pSelectableRow]="itemData">
                    <td style="width: 50px">{{itemData.id}}</td>
                    <td style="width: 100px">{{itemData.name}}</td>
                    <td style="width: 100px">{{itemData.className}}</td>
                    <td style="width: 100px">{{itemData.sex}}</td>
                    <td style="width: 100px">{{itemData.month}}</td>
                    <td style="width: 100px">{{itemData.amount}}</td>
                </tr>
            </ng-template>
        </p-table>
    </p-tabPanel>
    <p-tabPanel header="个人消费排行榜" style="width:1140px;">
        <div class="container">
            <div class="row">
                <div *ngFor="let item of this.highestRec" class="col">
                    <p-card header="最高消费" subheader="消费记录" [style]="{width: '320px'}" styleClass="ui-card-shadow">
                        <p-header>
                            <img src="Card" src="assets/image/usercard.png">
                        </p-header>
                        <div>
                            <ul class="heroes" style="width: 280px">
                                <li>
                                    <span class="badge">消费者</span>{{item.accName}}
                                </li>
                                <li>
                                    <span class="badge">发生时间</span>{{item.dealTime}}
                                </li>
                                <li>
                                    <span class="badge">金额</span>{{-item.monDeal}}元
                                </li>
                                <li>
                                    <span class="badge">住校</span>{{item.consumpStudent.liveAtSchool?"是":"否"}}
                                </li>
                            </ul>
                        </div>
                        <p-footer>
                            <button pButton type="button" label="学生详细信息" icon="pi pi-check" style="margin-right: .25em"
                                (click)="JumpTo(item.studentID)"></button>
                        </p-footer>
                    </p-card>
                </div>
            </div>
            <br />
            <div class="row">
                <div *ngFor="let item of this.highestRecLiveAtSchool" class="col">
                    <p-card header="最高消费(住校)" subheader="消费记录" [style]="{width: '320px'}" styleClass="ui-card-shadow">
                        <p-header>
                            <img src="Card" src="assets/image/usercard.png">
                        </p-header>
                        <div>
                            <ul class="heroes" style="width: 280px">
                                <li>
                                    <span class="badge">消费者</span>{{item.accName}}
                                </li>
                                <li>
                                    <span class="badge">发生时间</span>{{item.dealTime}}
                                </li>
                                <li>
                                    <span class="badge">金额</span>{{-item.monDeal}}元
                                </li>
                                <li>
                                    <span class="badge">住校</span>{{item.consumpStudent.liveAtSchool?"是":"否"}}

                                </li>
                            </ul>
                        </div>
                        <p-footer>
                            <button pButton type="button" label="学生详细信息" icon="pi pi-check" style="margin-right: .25em"
                                (click)="JumpTo(item.studentID)"></button>
                        </p-footer>
                    </p-card>
                </div>
            </div>
            <br />
            <div class="row">
                <div *ngFor="let item of this.highestRecNotLiveAtSchool" class="col">
                    <p-card header="最高消费(非住校)" subheader="消费记录" [style]="{width: '320px'}" styleClass="ui-card-shadow">
                        <p-header>
                            <img src="Card" src="assets/image/usercard.png">
                        </p-header>
                        <div>
                            <ul class="heroes" style="width: 280px">
                                <li>
                                    <span class="badge">消费者</span>{{item.accName}}
                                </li>
                                <li>
                                    <span class="badge">发生时间</span>{{item.dealTime}}
                                </li>
                                <li>
                                    <span class="badge">金额</span>{{-item.monDeal}}元
                                </li>
                                <li>
                                    <span class="badge">住校</span>{{item.consumpStudent.liveAtSchool?"是":"否"}}
                                </li>
                            </ul>
                        </div>
                        <p-footer>
                            <button pButton type="button" label="学生详细信息" icon="pi pi-check" style="margin-right: .25em"
                                (click)="JumpTo(item.studentID)"></button>
                        </p-footer>
                    </p-card>
                </div>
            </div>
        </div>
    </p-tabPanel>
</p-tabView>