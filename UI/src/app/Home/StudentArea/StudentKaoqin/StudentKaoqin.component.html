<app-nav></app-nav>
<p-tabView>
    <p-tabPanel header="考勤明细">
        <table-function [Table]="dt"></table-function>
        <p-table #dt [columns]="cols"
            [exportFilename]="this.service.CurrentStudentInfo.baseInfo.name + '('  + this.service.CurrentStudentInfo.baseInfo.id + ')考勤记录'"
            [value]="KaoqinList" selectionMode="multiple" [scrollable]="true" scrollHeight="570px">
            <ng-template pTemplate="header">
                <tr>
                    <th style="width: 50px" [pSortableColumn]="'recDateTime'">时间
                        <p-sortIcon [field]="'recDateTime'">
                        </p-sortIcon>
                    </th>
                    <th style="width: 50px" [pSortableColumn]="'controllerName'">类型
                        <p-sortIcon [field]="'controllerName'">
                        </p-sortIcon>
                    </th>
                    <th style="width: 50px" [pSortableColumn]="'dayOfWeek'">星期
                        <p-sortIcon [field]="'dayOfWeek'">
                        </p-sortIcon>
                    </th>
                    <th style="width: 50px" [pSortableColumn]="'weather.high'">最高温度
                        <p-sortIcon [field]="'weather.high'">
                        </p-sortIcon>
                    </th>
                    <th style="width: 50px" [pSortableColumn]="'weather.low'">最低温度
                        <p-sortIcon [field]="'weather.low'">
                        </p-sortIcon>
                    </th>
                    <th style="width: 50px" [pSortableColumn]="'weather.type'">天气
                        <p-sortIcon [field]="'weather.type'">
                        </p-sortIcon>
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-itemData>
                <tr [pSelectableRow]="itemData">
                    <td style="width: 50px">{{itemData.recDateTime}}</td>
                    <td style="width: 50px">{{itemData.controllerName}}</td>
                    <td [ngStyle]="itemData.dayOfWeek == 0 || itemData.dayOfWeek == 6 ?{'color':'red'}:{} "
                        style="width: 50px;text-align: center;">
                        {{ConvertNumberToWeekday(itemData.dayOfWeek)}}</td>
                    <td [ngStyle]="itemData.weather.high > 32 ?{'color':'red'}:{} "
                        style="width: 50px;text-align: right;">{{itemData.weather.high}}</td>
                    <td [ngStyle]="itemData.weather.low <=0 ?{'color':'blue'}:{} "
                        style="width: 50px;text-align: right;">{{itemData.weather.low}}</td>
                    <td style="width: 50px;text-align: center;">
                        <img [src]="GetWeatherImageByText(itemData.weather.type)">
                        {{itemData.weather.type}}
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </p-tabPanel>
</p-tabView>